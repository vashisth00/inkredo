(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{113:function(e,t,a){e.exports=a.p+"static/media/brand.11bbafb3.gif"},119:function(e,t,a){e.exports=a(310)},124:function(e,t,a){},308:function(e,t,a){},310:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(112),r=a.n(l),c=(a(124),a(4)),i=a(5),o=a(7),m=a(6),u=a(8),d=a(23),p=a.n(d),f=(a(137),a(138),a(139),p.a.initializeApp({apiKey:"AIzaSyAlRpGQL-iX0UOv2Wssir2bIIKaYpPG-iw",authDomain:"react-social-network-7e88b.firebaseapp.com",databaseURL:"https://react-social-network-7e88b.firebaseio.com",projectId:"react-social-network-7e88b",storageBucket:"react-social-network-7e88b.appspot.com",messagingSenderId:"906593123724"}));p.a.firestore().settings({timestampsInSnapshots:!0});var h=a(316),g=a(313),v=a(315),E=a(312),b=Object(n.createContext)(),N=a(317),y=a(113),w=a.n(y),k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).handleClick=function(){f.auth().signOut().then(function(){a.context.actions.updateAuthLogged(!1,null,null)},function(e){alert("Sign Out Error",e)})},a.handleSubmit=function(e){e.preventDefault(),a.input.value&&a.props.history.push("/search/".concat(a.input.value))},a.buttonsDisplay=function(e){var t="/u/"+a.context.state.logged;return e?s.a.createElement("div",null,s.a.createElement(E.a,{to:"/upload",className:"button is-primary"},"Upload"),s.a.createElement(E.a,{to:"/login",onClick:a.handleClick,className:"button is-light"},"Sign out"),s.a.createElement("div",{className:"dropdown is-hoverable is-right"},s.a.createElement("div",{className:"dropdown-trigger"},s.a.createElement("button",{className:"button","aria-haspopup":"true","aria-controls":"dropdown-menu3"},s.a.createElement("span",{className:"icon is-small"},s.a.createElement("i",{className:"fas fa-angle-down","aria-hidden":"true"})))),s.a.createElement("div",{className:"dropdown-menu",id:"dropdown-menu3",role:"menu"},s.a.createElement("div",{className:"dropdown-content"},s.a.createElement(E.a,{to:t,className:"dropdown-item"},"My Profile"),s.a.createElement(E.a,{to:"/settings",className:"dropdown-item"},"Settings"))))):s.a.createElement("div",null,s.a.createElement(E.a,{to:"/register",className:"button is-primary"},s.a.createElement("strong",null,"Sign up")),s.a.createElement(E.a,{to:"/login",className:"button is-light"},"Log in"))},a.state={redirect:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("nav",{className:"navbar is-fixed-top",role:"navigation","aria-label":"main navigation"},s.a.createElement("div",{className:"navbar-brand"},s.a.createElement(E.a,{to:"/",className:"navbar-item"},s.a.createElement("img",{src:w.a,alt:"",width:"90",height:"30"}))),s.a.createElement("div",{className:"navbar-start",id:"search-nav"},s.a.createElement("div",{className:"navbar-item"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("input",{ref:function(t){return e.input=t},className:"input",placeholder:"Search"})))),s.a.createElement("div",{className:"navbar-end"},s.a.createElement("div",{className:"navbar-item"},s.a.createElement("div",{className:"buttons"},this.buttonsDisplay(this.context.state.logged)))))}}]),t}(n.Component);k.contextType=b;var _=Object(N.a)(k);_.contextType=b;var S=_,x=a(11),O=a(29),j=function(e){var t=e.data.map(function(e,t){var a="/p/"+e.id;return s.a.createElement("div",{key:t,className:"user-content image is-square"},s.a.createElement(E.a,{to:a},s.a.createElement("img",{src:e.image,alt:""})))});return s.a.createElement("div",{className:"grid"},t)},C=function(e){var t=e.data.map(function(e,t){var a="/p/"+e.id;return s.a.createElement("div",{key:t,className:"user-content image is-square"},s.a.createElement(E.a,{to:a},s.a.createElement("img",{src:e.image,alt:""})))});return s.a.createElement("div",{className:"grid"},t)},T=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).componentWillMount=function(){f.database().ref("/profile/".concat(a.state.username)).once("value",function(e){if(e.val()){var t="https://firebasestorage.googleapis.com/v0/b/react-social-network-7e88b.appspot.com/o/assets%2Fdefault.png?alt=media";e.val().picture&&(t=e.val().picture),a.setState({description:e.val().description,followers_num:e.val().followers_num,following_num:e.val().following_num,profile_pic:t}),a.updatesPhotos(),a.updateLikedPhotos()}else a.setState({redirect:!0})}),f.database().ref("/profile/".concat(a.context.state.logged,"/following")).orderByChild("username").equalTo(a.state.username).once("value",function(e){e.val()&&a.setState({follow:!0})})},a.updatesPhotos=function(){f.database().ref("/posts").orderByChild("username").equalTo(a.state.username).once("value",function(e){e.val()&&(a.setState({posts_num:e.numChildren()}),Object.entries(e.val()).forEach(function(e){var t=Object(O.a)(e,2),n=t[0],s=t[1];s.id=n,a.setState({photos:Object(x.a)(a.state.photos).concat([s])})}))})},a.updateLikedPhotos=function(){f.database().ref("/profile/".concat(a.state.username,"/liked")).once("value",function(e){e.val()&&e.forEach(function(e){f.database().ref("/posts/".concat(e.val().post)).once("value",function(t){if(t.val()){var n={id:e.val().post,image:t.val().image};a.setState({liked:Object(x.a)(a.state.liked).concat([n])})}})})})},a.handleTab=function(){"posts"==a.state.mode?(a.tab_posts.classList.remove("is-active"),a.tab_likes.classList.add("is-active"),a.setState({mode:"likes"})):"likes"==a.state.mode&&(a.tab_likes.classList.remove("is-active"),a.tab_posts.classList.add("is-active"),a.setState({mode:"posts"}))},a.handleFollow=function(){a.context.state.logged?a.state.follow?(f.database().ref("/profile/".concat(a.context.state.logged,"/following")).orderByChild("username").equalTo(a.state.username).on("child_added",function(e){e.val()&&e.val().username===a.state.username&&(e.ref.remove(),f.database().ref("/profile/".concat(a.context.state.logged,"/following_num")).transaction(function(e){return e-1}),a.setState({follow:!1,followers_num:a.state.followers_num-1}))}),f.database().ref("/profile/".concat(a.state.username,"/followers")).orderByChild("username").equalTo(a.context.state.logged).on("child_added",function(e){e.val()&&e.val().username===a.context.state.logged&&(e.ref.remove(),f.database().ref("/profile/".concat(a.state.username,"/followers_num")).transaction(function(e){return e-1}))})):(f.database().ref("/profile/".concat(a.context.state.logged,"/following")).push({username:a.state.username}).then(function(){f.database().ref("/profile/".concat(a.context.state.logged,"/following_num")).transaction(function(e){return e+1}),a.setState({follow:!0,followers_num:a.state.followers_num+1})}),f.database().ref("/profile/".concat(a.state.username,"/followers")).push({username:a.context.state.logged}).then(function(){f.database().ref("/profile/".concat(a.state.username,"/followers_num")).transaction(function(e){return e+1})})):alert("You must be logged in to do that.")},a.state={mode:"posts",profile_pic:void 0,username:e.match.params.username,description:void 0,posts_num:0,followers_num:0,following_num:0,follow:!1,photos:[],liked:[],redirect:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return this.state.redirect?s.a.createElement(v.a,{to:"/error"}):s.a.createElement("div",{className:"profile"},s.a.createElement("div",{className:"card"},s.a.createElement("header",{className:"card-header"},s.a.createElement("figure",{className:"image profile-avatar"},s.a.createElement("img",{className:"is-rounded",src:this.state.profile_pic,alt:""})),s.a.createElement("div",{className:"card-header-content profile-info"},s.a.createElement("h1",{className:"title"},this.state.username),s.a.createElement("div",{className:"stats"},s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("span",{className:"post_num"},this.state.posts_num)," posts"),s.a.createElement("li",null,s.a.createElement("span",{className:"follower_num"},this.state.followers_num)," followers"),s.a.createElement("li",null,s.a.createElement("span",{className:"following_num"},this.state.following_num)," following"))),s.a.createElement("p",null,this.state.description),s.a.createElement("div",{className:"profile-options"},this.state.follow?s.a.createElement("button",{onClick:this.handleFollow,className:"button is-primary is-small"},"Unfollow"):s.a.createElement("button",{onClick:this.handleFollow,className:"button is-primary is-outline is-small"},"Follow")))),s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"tabs is-centered"},s.a.createElement("ul",null,s.a.createElement("li",{ref:function(t){return e.tab_posts=t},className:"tab-posts is-active",onClick:this.handleTab},s.a.createElement("a",null,"Posts")),s.a.createElement("li",{ref:function(t){return e.tab_likes=t},className:"tab-likes",onClick:this.handleTab},s.a.createElement("a",null,"Liked")))),"posts"==this.state.mode?s.a.createElement(j,{data:this.state.photos}):s.a.createElement(C,{data:this.state.liked}))))}}]),t}(n.Component);T.contextType=b,T.contextType=b;var L=T,D=a(114),A=function(e){var t=e.data.map(function(e,t){var a=void 0!=e.last_update?D(e.last_update).fromNow():"never";return s.a.createElement("tr",{key:t},s.a.createElement("td",null,s.a.createElement("div",{className:"media"},s.a.createElement("figure",{className:"image is-32x32"},s.a.createElement("img",{src:e.profile_pic,alt:""})),s.a.createElement("div",{className:"media-right"},s.a.createElement(E.a,{to:"/u/".concat(e.username)},e.username)))),s.a.createElement("td",null,a))});return s.a.createElement("div",{className:"updates"},s.a.createElement("div",{className:"panel-block",style:{padding:"0px"}},s.a.createElement("table",{className:"table is-striped is-fullwidth"},s.a.createElement("tbody",null,0==e.data&&s.a.createElement("tr",null,s.a.createElement("td",{className:"has-text-centered"},"There are no updates")),t))))},q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).componentWillMount=function(){a.props.following.forEach(function(e){f.database().ref("/profile/".concat(e)).once("value",function(e){if(e.val()){var t="https://firebasestorage.googleapis.com/v0/b/react-social-network-7e88b.appspot.com/o/assets%2Fdefault.png?alt=media";e.val().picture&&(t=e.val().picture);var n={profile_pic:t,username:e.key,last_update:e.val().last_update};a.setState({data:Object(x.a)(a.state.data).concat([n])})}})}),a.setState({loading:!1})},a.state={data:[],loading:!0},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.state.loading?null:s.a.createElement("div",{className:"sidebar"},s.a.createElement("nav",{className:"panel",styles:"background-color: white;"},s.a.createElement("p",{className:"panel-heading has-text-centered"},"Updates"),s.a.createElement(A,{data:this.state.data})))}}]),t}(n.Component),P=function(e){var t=e.data.map(function(e,t){var a="/u/"+e.username;return s.a.createElement("li",{key:t},s.a.createElement("span",{className:"comment-username"},s.a.createElement(E.a,{to:a},e.username))," ",s.a.createElement("span",{className:"comment"},e.comment))});return s.a.createElement("div",{className:"comments"},s.a.createElement("ul",null,t))},U=function(e){var t=e.data.map(function(e,t){return s.a.createElement("span",{class:"tag"},e)});return s.a.createElement("div",{className:"tags"},t)},B=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){f.database().ref("/posts/".concat(a.state.post_id)).once("value",function(e){e.val()?a.updatePost(e):a.props.updateRedirect(!0,"error")}).then(function(){f.database().ref("/profile/".concat(a.state.username)).once("value",function(e){e.val()&&(e.val().picture?a.setState({profile_pic:e.val().picture}):a.setState({profile_pic:"https://firebasestorage.googleapis.com/v0/b/react-social-network-7e88b.appspot.com/o/assets%2Fdefault.png?alt=media"}))})}),f.database().ref("/posts/".concat(a.state.post_id,"/liked")).orderByChild("username").equalTo(a.context.state.logged).once("value",function(e){e.val()&&a.setState({liked:!0})}),f.database().ref("/comments/".concat(a.state.post_id)).once("value",function(e){e.val()&&Object.entries(e.val()).forEach(function(e){var t=Object(O.a)(e,2),n=(t[0],t[1]);a.setState({comments:Object(x.a)(a.state.comments).concat([n])})})}),f.database().ref("/posts/".concat(a.state.post_id,"/tags")).once("value",function(e){e.val()&&Object.entries(e.val()).forEach(function(e){var t=Object(O.a)(e,2),n=(t[0],t[1]);a.setState({tags:Object(x.a)(a.state.tags).concat([n])})})})},a.updatePost=function(e){a.setState({username:e.val().username,description:e.val().description,time:new Date(e.val().time).toDateString(),image:e.val().image,likes_num:e.val().like_num})},a.handleLike=function(){a.context.state.logged?a.state.liked?f.database().ref("/posts/".concat(a.state.post_id,"/liked")).orderByChild("username").equalTo(a.context.state.logged).once("value",function(e){e.val()&&e.forEach(function(e){if(e.val().username===a.state.username)return e.ref.remove(),f.database().ref("/posts/".concat(a.state.post_id,"/like_num")).transaction(function(e){return e-1}),a.setState({liked:!1,likes_num:a.state.likes_num-1}),void f.database().ref("/profile/".concat(a.context.state.logged,"/liked")).orderByChild("post").equalTo(a.state.post_id).once("value",function(e){e.val()&&e.forEach(function(e){e.val().post!=a.state.post_id||e.ref.remove()})})})}):f.database().ref("/posts/".concat(a.state.post_id,"/liked")).push({username:a.context.state.logged}).then(function(e){f.database().ref("/posts/".concat(a.state.post_id,"/like_num")).transaction(function(e){return e+1}),a.setState({liked:!0,likes_num:a.state.likes_num+1}),f.database().ref("/profile/".concat(a.context.state.logged,"/liked")).push({post:a.state.post_id})}).catch(function(e){console.log(e)}):alert("You must be logged in to do that.")},a.handleDelete=function(){window.confirm("Are you sure you want to delete this photo?")&&f.database().ref("/posts").child(a.state.post_id).remove().then(function(){alert("Photo deleted!"),a.setState({render:!1})}),a.props.updateRedirect&&a.props.updateRedirect(!0,"profile")},a.handleSave=function(){f.database().ref("/posts/".concat(a.state.post_id,"/description")).set(a.state.description).then(function(){a.setState({edit:!1}),alert("saved")}).catch(function(e){alert(e)})},a.handleEdit=function(){a.setState({edit:!0})},a.handleEditChange=function(e){a.setState({description:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),a.context.state.logged?f.database().ref("/comments").child(a.state.post_id).push({username:a.context.state.logged,comment:a.input.value}).then(function(e){var t={username:a.context.state.logged,comment:a.input.value};a.setState({comments:Object(x.a)(a.state.comments).concat([t])}),a.input.value=""}).catch(function(e){console.log(e)}):alert("You must be logged in to do that.")},a.displayLikesNum=function(){return 1==a.state.likes_num?s.a.createElement("span",{className:"likes-num"},a.state.likes_num," ",s.a.createElement("label",null,"like")):s.a.createElement("span",{className:"likes-num"},a.state.likes_num," ",s.a.createElement("label",null,"likes"))},a.displayPhotosDropdown=function(){return a.state.username==a.context.state.logged?s.a.createElement("div",{className:"dropdown is-hoverable is-right is-small photo-dropdown"},s.a.createElement("div",{className:"dropdown-trigger"},s.a.createElement("button",{className:"button","aria-haspopup":"true","aria-controls":"dropdown-menu3"},s.a.createElement("span",{className:"icon is-small",style:{height:"0px"}},s.a.createElement("i",{className:"fas fa-angle-down","aria-hidden":"true"})))),s.a.createElement("div",{className:"dropdown-menu",id:"dropdown-menu3",role:"menu"},s.a.createElement("div",{className:"dropdown-content"},s.a.createElement("a",{onClick:a.handleEdit,className:"dropdown-item"},"Edit"),s.a.createElement("a",{onClick:a.handleDelete,className:"dropdown-item"},"Delete")))):null},a.state={username:void 0,profile_pic:void 0,time:void 0,description:void 0,edit:!1,post_id:e.post_id,image:void 0,tags:[],comments:[],likes_num:0,liked:!1,render:!0},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return this.state.redirect?s.a.createElement(v.a,{to:"/error"}):this.state.render?s.a.createElement("div",{className:"post"},s.a.createElement("div",{className:"card"},s.a.createElement("header",null,s.a.createElement("div",{className:"media is-fullwidth"},s.a.createElement("figure",{className:"image is-48x48"},s.a.createElement("img",{src:this.state.profile_pic,alt:""})),s.a.createElement("p",{className:"card-header-title content-username"},s.a.createElement(E.a,{to:"/u/".concat(this.state.username)},this.state.username)),s.a.createElement(E.a,{target:"_blank",to:"/p/".concat("".concat(this.state.post_id))},s.a.createElement("button",{className:"button is-light is-small is-pulled-right share"},"Share")),this.displayPhotosDropdown())),s.a.createElement("div",{className:"card-image"},s.a.createElement("figure",{className:"image"},s.a.createElement("img",{src:this.state.image,alt:""}))),s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"content-options"},this.state.liked?s.a.createElement("button",{onClick:this.handleLike,className:"button is-danger is-small"},"Unlike"):s.a.createElement("button",{onClick:this.handleLike,className:"button is-danger is-outlined is-small"},"Like"),this.state.likes_num>0&&s.a.createElement("span",{className:"likes-num"},this.state.likes_num," ",s.a.createElement("label",null,"likes")),s.a.createElement("time",{className:"content-time"},this.state.time)),s.a.createElement("div",{className:"content-body",ref:function(t){return e.desc=t}},this.state.edit?s.a.createElement("div",null,s.a.createElement("textarea",{class:"textarea",rows:"1",onChange:this.handleEditChange},this.state.description),s.a.createElement("div",{class:"field is-grouped edit-buttons"},s.a.createElement("p",{class:"control"},s.a.createElement("button",{class:"button is-primary is-small",onClick:this.handleSave},"Save")),s.a.createElement("p",{class:"control"},s.a.createElement("button",{class:"button is-primary is-small",onClick:function(){return e.setState({edit:!1})}},"Cancel")))):this.state.description,0!=this.state.tags.length&&s.a.createElement(U,{data:this.state.tags})),s.a.createElement("hr",null),this.context.state.logged&&s.a.createElement(P,{data:this.state.comments}),s.a.createElement("form",{onSubmit:this.handleSubmit,style:{display:this.context.state.logged?"block":"none"}},s.a.createElement("div",{className:"field has-addons"},s.a.createElement("div",{className:"control is-expanded"},s.a.createElement("input",{ref:function(t){return e.input=t},className:"input",type:"text",placeholder:"Add a comment"})),s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button is-primary",type:"submit"},"Submit")))))))):null}}]),t}(n.Component);B.contextType=b,B.contextType=b;var R=B,F=function(e){var t=e.data.map(function(e,t){return s.a.createElement(R,{key:t,post_id:e})});return s.a.createElement("div",{className:"posts"},0==e.data&&s.a.createElement("p",null,"There are no posts."),t)},M=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){f.database().ref("/profile/".concat(a.context.state.logged,"/following")).once("value",function(e){e.val()?(e.forEach(function(e){a.setState({following_list:Object(x.a)(a.state.following_list).concat([e.val().username])})}),a.state.following_list.forEach(function(e){f.database().ref("/posts").orderByChild("username").equalTo(e).once("value",function(e){e.val()&&e.forEach(function(e){a.setState({post_list:Object(x.a)(a.state.post_list).concat([e.key])})})})}),a.setState({loading:!1})):a.setState({loading:!1})})},a.state={loading:!0,following_list:[],post_list:[]},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.following_list,a=e.post_list;return e.loading?s.a.createElement("div",null,"loading..."):s.a.createElement("div",{className:"main"},s.a.createElement("div",{className:"grid-container"},s.a.createElement(q,{following:t}),s.a.createElement(F,{data:a})))}}]),t}(n.Component);M.contextType=b,M.contextType=b;var W=M,I=a(115),Y=a.n(I),z=a(116),G=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).handleDelete=function(e){var t=a.state.tags;a.setState({tags:t.filter(function(t,a){return a!==e})})},a.handleAddition=function(e){a.setState(function(t){return{tags:Object(x.a)(t.tags).concat([e])}})},a.handleDrag=function(e,t,n){var s=Object(x.a)(a.state.tags).slice();s.splice(t,1),s.splice(n,0,e),a.setState({tags:s})},a.handleChange=function(e){if(e.target.files){var t=e.target.files[0].type,n=e.target.files[0].name;if(t.includes("image")){a.setState({file:e.target.files[0]});var s=new FileReader;s.onload=function(e){document.querySelector("#preview").setAttribute("src",e.target.result),document.querySelector(".file-name").innerText=n},s.readAsDataURL(e.target.files[0])}else alert("File must be a picture. Try again")}},a.handleUpload=function(e){if(a.state.file){var t=a.state.file,n=t.type.split("/")[1],s=Y.a.generate(),l=s+"."+n,r=f.storage().ref("/images/".concat(a.context.state.logged,"/").concat(l)).put(t);a.setState({progress:!0}),r.on("state_changed",function(e){a.progress.value=e.bytesTransferred/e.totalBytes*100},function(e){console.log(e)},function(){f.storage().ref("images/".concat(a.context.state.logged)).child(l).getDownloadURL().then(function(e){var t=document.querySelector("#description").value;f.database().ref("/posts").child(s).set({username:a.context.state.logged,time:p.a.database.ServerValue.TIMESTAMP,description:t,image:e,tags:a.state.tags.map(function(e){return e.id})}).then(function(){f.database().ref("/profile/".concat(a.context.state.logged,"/last_update")).set(p.a.database.ServerValue.TIMESTAMP),a.setState({redirect:!0,uuid:s})})})})}else alert("Select an image before submitting")},a.state={file:null,uuid:void 0,tags:[],redirect:!1,progress:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;if(this.state.redirect){var t="/p/"+this.state.uuid;return s.a.createElement(v.a,{to:t})}return s.a.createElement("div",{className:"upload"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},s.a.createElement("p",{className:"card-header-title is-centered"},"Upload image")),s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"file has-name is-centered"},s.a.createElement("label",{className:"file-label"},s.a.createElement("input",{className:"file-input",type:"file",name:"resume",onChange:this.handleChange}),s.a.createElement("span",{className:"file-cta"},s.a.createElement("span",{className:"file-icon"},s.a.createElement("i",{className:"fas fa-upload"})),s.a.createElement("span",{className:"file-label"},"Choose a file\u2026")),s.a.createElement("span",{className:"file-name"},"None"))),s.a.createElement("br",null),s.a.createElement("div",null,s.a.createElement("img",{className:"is-center is-rounded",id:"preview",alt:"",src:""})),s.a.createElement("br",null),s.a.createElement("progress",{className:"progress is-primary",ref:function(t){return e.progress=t},style:{display:!0===this.state.progress?"block":"none"},max:"100"}),s.a.createElement(z.WithContext,{tags:this.state.tags,handleDelete:this.handleDelete,handleAddition:this.handleAddition,handleDrag:this.handleDrag,delimiters:[188,13,32]}),s.a.createElement("br",null),s.a.createElement("textarea",{id:"description",className:"textarea",placeholder:"Description"}),s.a.createElement("br",null),s.a.createElement("button",{className:"button is-primary",onClick:this.handleUpload},"Submit"))))}}]),t}(n.Component);G.contextType=b,G.contextType=b;var J=G,K=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),f.auth().signInWithEmailAndPassword(a.email.value,a.pass.value).then(function(e){a.context.actions.updateAuthLogged(!0,e.user.displayName,e.user.uid)}).catch(function(e){alert(e.message)})},a.state={redirect:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return this.state.redirect?s.a.createElement(v.a,{to:"/"}):s.a.createElement("div",{className:"login"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},s.a.createElement("p",{className:"card-header-title is-centered"},"Login")),s.a.createElement("div",{className:"card-content"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("input",{ref:function(t){return e.email=t},className:"input is-centered",type:"email",placeholder:"Email",autoComplete:"username"}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("input",{ref:function(t){return e.pass=t},className:"input is-centered",type:"password",placeholder:"Password",autoComplete:"current-password"}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("button",{type:"submit",className:"button is-primary is-fullwidth"},"Enter")))))}}]),t}(n.Component);K.contextType=b,K.contextType=b;var V=K,H=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).updateLogged=function(e){a.context.actions.updateLogged(e),a.setState({redirect:!0})},a.handleSubmit=function(e){e.preventDefault();var t=a.user.value;f.database().ref("/profile/".concat(t)).once("value",function(e){e.val()?alert("Username already exists. Try Again."):f.auth().createUserWithEmailAndPassword(a.email.value,a.pass.value).then(function(e){f.database().ref("/profile").child(t).set({uid:e.user.uid,description:"No description",followers_num:0,following_num:0}).then(function(){e.user.updateProfile({displayName:t}).then(function(){a.updateLogged(t)})}),f.database().ref("/profile/".concat(t,"/following")).push({username:t})}).catch(function(e){alert(e.message)})})},a.state={registered:!1,selected_username:!1,redirect:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return this.state.redirect?s.a.createElement(v.a,{to:"/"}):s.a.createElement("div",{className:"register"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},s.a.createElement("p",{className:"card-header-title is-centered"},"Register")),s.a.createElement("div",{className:"card-content"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("input",{ref:function(t){return e.email=t},className:"input is-centered",type:"email",placeholder:"Email"}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("input",{ref:function(t){return e.user=t},className:"input is-centered",type:"text",placeholder:"Username"}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("input",{ref:function(t){return e.pass=t},className:"input is-centered",type:"password",placeholder:"Password"}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("button",{type:"submit",className:"button is-primary is-fullwidth"},"Enter")))))}}]),t}(n.Component);H.contextType=b,H.contextType=b;var Q=H,X=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).updateRedirect=function(e,t){a.setState({redirect:e,redirect_loc:t})},a.state={redirect_loc:void 0,redirect:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.state.redirect&&"error"==this.state.redirect_loc?s.a.createElement(v.a,{to:"/error"}):this.state.redirect&&"profile"==this.state.redirect_loc?s.a.createElement(v.a,{to:"/u/".concat(this.context.state.logged)}):s.a.createElement("div",{className:"view"},s.a.createElement(R,{updateRedirect:this.updateRedirect,post_id:this.props.match.params.id}))}}]),t}(n.Component);X.contextType=b,X.contextType=b;var $=X,Z=function(){return s.a.createElement("div",{className:"error"},s.a.createElement("section",{className:"hero is-large is-primary"},s.a.createElement("div",{className:"hero-body"},s.a.createElement("div",{className:"container has-text-centered"},s.a.createElement("h1",{className:"title"},"404 Error"),s.a.createElement("h2",{className:"subtitle"},"Unable to find requested content"),s.a.createElement(E.a,{to:"/"},s.a.createElement("button",{className:"button is-light"},"Home"))))))},ee=function(e){var t=e.data.map(function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",null,s.a.createElement("div",{className:"media"},s.a.createElement("figure",{className:"image is-32x32"},s.a.createElement("img",{src:e.profile_pic,alt:""})),s.a.createElement("div",{className:"media-right"},s.a.createElement(E.a,{to:"/u/".concat(e.username)},e.username)))),s.a.createElement("td",null,e.description))});return s.a.createElement("div",{className:"results"},s.a.createElement("div",{className:"panel-block",style:{padding:"0px"}},s.a.createElement("table",{className:"table is-striped is-fullwidth"},s.a.createElement("tbody",null,0==e.data&&s.a.createElement("tr",null,s.a.createElement("td",{className:"has-text-centered"},"There are no results")),t))))},te=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).check=function(){f.database().ref("/profile/".concat(a.props.match.params.q)).once("value",function(e){if(e.val()){var t="https://firebasestorage.googleapis.com/v0/b/react-social-network-7e88b.appspot.com/o/assets%2Fdefault.png?alt=media";e.val().picture&&(t=e.val().picture);var n={profile_pic:t,username:e.key,description:e.val().description};a.setState({data:Object(x.a)(a.state.data).concat([n])})}}),a.setState({loading:!1})},a.componentWillMount=function(){a.check()},a.state={redirect:!1,data:[],query:a.props.match.params.q,loading:!0},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.match.params.q!==this.props.match.params.q&&this.setState({data:[],query:this.props.match.params.q},this.check())}},{key:"render",value:function(){return s.a.createElement("div",{className:"upload"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},s.a.createElement("p",{className:"card-header-title is-centered"},"Search")),s.a.createElement("div",{className:"card-content"},this.state.loading?s.a.createElement("span",null,"Loading..."):s.a.createElement(ee,{data:this.state.data}))))}}]),t}(n.Component),ae=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).componentWillMount=function(){f.database().ref("/profile/".concat(a.context.state.logged)).once("value",function(e){e.val()&&(e.val().picture?a.setState({profile_pic:e.val().picture}):a.setState({profile_pic:"https://firebasestorage.googleapis.com/v0/b/react-social-network-7e88b.appspot.com/o/assets%2Fdefault.png?alt=media"}),a.setState({bio:e.val().description}))})},a.handleUpload=function(e){if(a.state.file){var t=f.storage().ref("/profile/".concat(a.context.state.logged,"/profile")).put(a.state.file);a.setState({progress:!0}),t.on("state_changed",function(e){a.progress.value=e.bytesTransferred/e.totalBytes*100},function(e){console.log(e)},function(){f.storage().ref("profile/".concat(a.context.state.logged)).child("profile").getDownloadURL().then(function(e){f.database().ref("/profile/".concat(a.context.state.logged,"/picture")).set(e).then(function(){a.setState({profile_pic:e}),a.setState({progress:!1}),alert("Profile picture changed!")})})})}else alert("Select an image before submitting")},a.handleUploadChange=function(e){if(e.target.files)if(e.target.files[0].type.includes("image")){var t=e.target.files[0].name;a.setState({file:e.target.files[0]});var n=new FileReader;n.onload=function(e){a.setState({pic_changed:!0}),a.setState({profile_pic:e.target.result}),document.querySelector(".file-name").innerText=t},n.readAsDataURL(e.target.files[0])}else alert("File must be a picture. Try again")},a.handleBioChange=function(e){a.setState({bio:e.target.value})},a.handleBioSave=function(e){f.database().ref("/profile/".concat(a.context.state.logged,"/description")).set(a.state.bio).then(function(){alert("Bio was changed!")}).catch(function(e){alert(e)})},a.state={profile_pic:void 0,bio:void 0,file:null,redirect:!1,progress:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;if(this.state.redirect){var t="/p/"+this.state.uuid;return s.a.createElement(v.a,{to:t})}return s.a.createElement("div",{className:"upload"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},s.a.createElement("p",{className:"card-header-title is-centered"},"Settings")),s.a.createElement("div",{className:"card-content"},s.a.createElement("label",{className:"label"},"Profile: "),s.a.createElement("article",{className:"media"},s.a.createElement("figure",{className:"media-left",ref:function(t){return e.profile=t}},s.a.createElement("p",{className:"image is-128x128"},s.a.createElement("img",{src:this.state.profile_pic}))),s.a.createElement("div",{className:"media-content"},s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"file has-name"},s.a.createElement("label",{className:"file-label"},s.a.createElement("input",{className:"file-input",type:"file",name:"resume",onChange:this.handleUploadChange}),s.a.createElement("span",{className:"file-cta"},s.a.createElement("span",{className:"file-icon"},s.a.createElement("i",{className:"fas fa-upload"})),s.a.createElement("span",{className:"file-label"},"Choose a file\u2026")),s.a.createElement("span",{className:"file-name"},"None"))),s.a.createElement("br",null),s.a.createElement("button",{className:"button is-primary",onClick:this.handleUpload},"Save Photo")))),s.a.createElement("progress",{className:"progress is-primary",ref:function(t){return e.progress=t},style:{display:!0===this.state.progress?"block":"none"},max:"100"}),s.a.createElement("hr",null),s.a.createElement("br",null),s.a.createElement("label",{className:"label"},"Biography: "),s.a.createElement("textarea",{id:"description",className:"textarea",placeholder:"Enter bio",value:this.state.bio,onChange:this.handleBioChange}),s.a.createElement("br",null),s.a.createElement("button",{className:"button is-primary",onClick:this.handleBioSave},"Save Bio"))))}}]),t}(n.Component);ae.contextType=b;var ne=ae,se=a(118);function le(e){var t=e.component,a=e.authenticated,n=Object(se.a)(e,["component","authenticated"]);return s.a.createElement(g.a,Object.assign({},n,{render:function(e){return!0===a?s.a.createElement(t,Object.assign({},e,n)):s.a.createElement(v.a,{to:"/login"})}}))}a(308);var re=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).componentWillMount=function(){fetch("/api/test").then(function(e){return e.json()}).then(function(e){return console.log(e)}).catch(function(){return console.log("Express backend not working")}),f.auth().onAuthStateChanged(function(e){e?a.setState({logged:e.displayName,uid:e.uid,authenticated:!0,loading:!1}):a.setState({logged:null,authenticated:!1,loading:!1,uid:null})})},a.updateAuth=function(e){a.setState({authenticated:e})},a.updateLogged=function(e){a.setState({logged:e})},a.updateAuthLogged=function(e,t,n){a.setState({authenticated:e,logged:t,uid:n})},a.state={logged:null,uid:null,authenticated:!1,loading:!0},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.logged,a=e.authenticated,n=e.uid;return e.loading?null:s.a.createElement("div",{className:"App"},s.a.createElement(b.Provider,{value:{state:{logged:t,authenticated:a,uid:n},actions:{updateLogged:this.updateLogged,updateAuth:this.updateAuth,updateAuthLogged:this.updateAuthLogged}}},s.a.createElement(S,null),s.a.createElement(h.a,null,s.a.createElement(le,{exact:!0,path:"/",component:W,authenticated:a}),s.a.createElement(le,{exact:!0,path:"/upload",component:J,authenticated:a}),s.a.createElement(le,{exact:!0,path:"/settings",component:ne,authenticated:a}),s.a.createElement(g.a,{path:"/login",render:function(){return a?s.a.createElement(v.a,{to:"/"}):s.a.createElement(V,null)},exact:!0}),s.a.createElement(g.a,{path:"/register",render:function(){return a?s.a.createElement(v.a,{to:"/"}):s.a.createElement(Q,null)},exact:!0}),s.a.createElement(g.a,{path:"/u/:username",render:function(e){return s.a.createElement(L,e)},exact:!0}),s.a.createElement(g.a,{path:"/p/:id",render:function(e){return s.a.createElement($,e)},exact:!0}),s.a.createElement(g.a,{path:"/search/:q",render:function(e){return s.a.createElement(te,e)},exact:!0}),s.a.createElement(g.a,{path:"*",component:Z}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ce=a(314);r.a.render(s.a.createElement(ce.a,null,s.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[119,2,1]]]);
//# sourceMappingURL=main.03bef42d.chunk.js.map